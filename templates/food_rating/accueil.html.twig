{% extends 'base.html.twig' %}

{% block body %}
    <center><h1>Bienvenue sur FoodRating - Accueil</h1></center>

    <div id="carousel_accueil" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carousel_accueil" data-slide-to="0" class="active"></li>
            <li data-target="#carousel_accueil" data-slide-to="1"></li>
            <li data-target="#carousel_accueil" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="http://placehold.it/750x250" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Alpha</h5>
                    <p>alpha</p>
                </div>
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="http://placehold.it/750x250" alt="Second slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Beta</h5>
                    <p>beta</p>
                </div>
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="http://placehold.it/750x250" alt="Third slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Iota</h5>
                    <p>iota</p>
                </div>
            </div>
        </div>

        <a class="carousel-control-prev" href="#carousel_accueil" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel_accueil" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div class="col-lg-12">
        <div class="row">
            <div class="jumbotron col-sm-6">
                <h1 class="display-5">Les meilleurs produits !</h1>
                <p class="lead">
                    
                    {% if meilleursProduit is defined %}
                        <div id="carousel_meilleurs_produits" class="carousel slide" data-interval="false" data-ride="carousel">
                            <div class="carousel-inner w-75 mx-auto" style="height: 310px;">
                                {% set indice = 0 %}
                                {% for p in meilleursProduit %}
                                    {% if p.categories is defined %}
                                        {% set cat = p.categories | split(",") %}
                                    {% else %}
                                        {% set cat = ["Non renseignée"] %}
                                    {% endif %}

                                    {% if loop.first %}
                                        <div class="carousel-item active">
                                    {% else %}
                                        <div class="carousel-item">
                                    {% endif %}
                                        {% if indice < categorieProduit|length %}
                                            <a href="{{ path("produit_v2", {"id" : p.id ?? p.code, "categorie": categorieProduit[indice]}) }}">
                                                <img class="d-block mx-auto img-thumbnail" style="height: 200px;" src="{{ p.image_url ?? p.image_front_url ?? p.selected_images.front.display.fr ?? "/images/image_vide.png" }}" alt="Image du produit : {{ p.product_name }}" />
                                            </a>
                                        
                                            <div class="carousel-caption d-none d-md-block" style="position: initial;">
                                                <h5>{{ p.brands ?? p.brands_tags[0] ?? "Non renseigné" }}</h5>
                                                <a href="{{ path("produit_v2", {"id" : p.id ?? p.code, "categorie": categorieProduit[indice]}) }}">
                                                    {{ p.product_name | capitalize }}
                                                </a>
                                            </div>
                                        {% endif %}
                                        </div>
                                    {% set indice = indice + 1 %}
                                {% endfor %}
                            </div>

                            <a class="carousel-control-prev" href="#carousel_meilleurs_produits" role="button" data-slide="prev">
                                <i class="fas fa-angle-left fa-3x text-primary"></i>
                            </a>
                            <a class="carousel-control-next" href="#carousel_meilleurs_produits" role="button" data-slide="next">
                                <i class="fas fa-angle-right fa-3x text-primary"></i>
                            </a>
                        </div>
                    {% else %}
                        Non renseigné
                    {% endif %}
                </p>
                <hr class="my-4">
                <p class="lead">
                    <a class="btn btn-primary btn-lg" href=" {{ path("liste_categorie") }}" role="button">Plus de produit</a>
                </p>
            </div>
            <div class="jumbotron col-sm-6">
                <h1 class="display-4">Les meilleurs commentaires !</h1>
                <p class="lead">Affichage des 5 meilleurs commentaires en fonctions des produits</p>
                <hr class="my-4">
                <p>Voir plus avec le bouton "plus de commentaire"</p>
                <p class="lead">
                    <a class="btn btn-primary btn-lg" href="#" role="button">Plus de commentaire</a>
                </p>
            </div>
        </div>
    </div>
{% endblock %}