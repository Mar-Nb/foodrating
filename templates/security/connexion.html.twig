<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Connexion{% endblock %}</title>
        <link rel="stylesheet" href="https://bootswatch.com/4/minty/bootstrap.min.css">
        <script src="https://bootswatch.com/_vendor/jquery/dist/jquery.min.js"></script>
        <script src="https://bootswatch.com/_vendor/bootstrap/dist/js/bootstrap.min.js"></script>
        {% block stylesheets %}{% endblock %}
    </head>

    {% block body %}
        <script>
        $(document).ready( function() {
            /*$("#inscription").click(function() {
	            $("#formChange").load("/inscription")
            });*/
	    });
            
        function ChargerPageInscription() {
            //history.pushState({ path: this.path}, '', '/inscription');
            window.location.href = "https://localhost:8000/inscription";
        }
        </script>
        {% if app.user %}
            <script>window.location.href="{{ path('espace') }}";</script>
        {% else %}
            {% for msg in app.session.flashBag.get('success') %}
                <div class="alert alert-success alert-dismissible fade show">
                    {{ msg }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %}
           {# {% for msg in app.session.flashBag.get('verify_email_error') %}
                <div class="alert alert-danger">
                    {{ msg }}
                </div>
            {% endfor %}#}
            <div id="formChange">
                <div style="margin-top:10%;">
                    <div class="container">
                        <ul class="nav nav-tabs col-sm-5 m-auto">
                            <li class="nav-item">
                                <a class="nav-link active" href="#">Connexion</a>
                            </li>
                            <li class="nav-item">
                                <button class="nav-link" id="inscription" onclick="ChargerPageInscription()">Inscription</button>
                            </li>
                        </ul>
                        <div id="myTabContent" class="tab-content">
                            <div class="col-sm-5 m-auto form-group tab-pane fade active show">
                                {% if error %}
                                    <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                                {% endif %}
                                <fieldset>
                                    <form action="{{ path('login_security') }}" method="post">
                                        <legend>Connexion Ã  l'espace personnel !</legend>
                                        <div class="form-group">
                                            <label>Email</label>
                                            <input type="text" id="inputEmail" name="email" class="form-control" placeholder="Entrez votre email" value="{{ last_username }}" required/>
                                        </div>
                                        <div class="form-group">
                                            <label>Mot de passe</label>
                                            <input type="password" id="inputPassword" name="password" class="form-control" placeholder="Entrer votre mot de passe" required/>
                                        </div>
                                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                                        <input type="hidden" name="go_to" value="{{ path('espace') }}" />
                                        <input type="hidden" name="back_to" value="{{ path('login_security') }}" />
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-success">Connexion</button>
                                            <a href="/" class="btn btn-info">Retour</a>
                                        </div>
                                    </form>
                                </fieldset>
                            </div>
                        </div>

                        <div id="myTabContent" class="tab-content">
                            <div class="col-sm-5 m-auto form-group tab-pane fade active show">
                                {% if formInscription is defined %}
                                    {% form_theme formInscription 'bootstrap_4_layout.html.twig' %}
                                    <fieldset>
                                        <legend>Inscription sur FoodRating !</legend>
                                        {{ form_start(formInscription) }}

                                        {{ form_row(formInscription.username, {'label': "Pseudo", 'attr': {'placeholder': "Entrez votre pseudo"}}) }}
                                        {{ form_row(formInscription.email, {'label': "Email", 'attr': {'placeholder': "Entrez votre email"}}) }}
                                        {{ form_row(formInscription.password, {'label': "Mot de passe", 'attr': {'placeholder': "Entrez votre mot de passe"}}) }}
                                        {{ form_row(formInscription.password_confirmation, {'label': "Confirmation du mot de passe", 'attr': {'placeholder': "Retapez votre mot de passe"}}) }}

                                        <div class="form-group">
                                            <button type="submit" class="btn btn-success">S'inscrire</button>
                                            <a href="/" class="btn btn-info">Retour</a>
                                        </div>
                                        {{ form_end(formInscription) }}
                                    </fieldset>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
       
    {% endblock %}
</html>