{% extends 'base.html.twig' %}

{% block title %}Liste des sujets{% endblock %}

{% block body %}

{% for message in app.flashes('suppr_disc') %}
    {{ message }}
{% endfor %}

<a href="{{ path("createDisc") }}" class="btn btn-primary float-right">Créer un nouveau sujet <i class="fa fa-plus"></i></a>
<h6 class="border-bottom border-gray pb-2 mt-3 mb-0">Recent updates</h6>

<table class="table table-sm table-striped table-hover mt-2">
    <thead class="thead-light">
        <tr>
        	<th class="w-75">Titre</th>
            <th>Utilisateur</th>
            <th>Date de création</th>
        </tr>
    </thead>
    
    <tbody>
    
		{% for d in discussions %}
        <tr>
        	<td class="font-weight-bold"> <a href="{{ path("readDisc", {"id": d.idDiscussion}) }}">{{ d.titre }}</a> </td>
        	{% if d.id_utilisateur is not null %}
        	    <td> {{ d.id_utilisateur.username }} </td>
            {% else %}
                <td> Utilisateur Supprimé </td>
            {% endif %}
        	<td class="text-muted"> {{ d.creation | date("d/m/Y") }} </td>
        </tr>
        {% endfor %}
    
    </tbody>
</table>

<div class="mt-3">{{ knp_pagination_render(discussions) }}</div>
{% endblock %}
